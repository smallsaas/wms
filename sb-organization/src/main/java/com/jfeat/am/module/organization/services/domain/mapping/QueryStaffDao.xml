<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jfeat.am.module.organization.services.domain.dao.QueryStaffDao">
    <sql id="Base_Column_List">
        t_staff.*
    </sql>
    <select id="findStaffs" resultType="StaffItem" parameterType="StaffItem">
        SELECT a.*, b.*, d.*, c.*
        FROM t_staff a LEFT JOIN t_department b ON b.id=a.dept_id
                       LEFT JOIN t_profile c ON c.id=a.profile_id
                       LEFT JOIN t_position d ON d.id=a.position_id
        WHERE 1=1
        <if test="id != null and id>0 ">
            AND a.id LIKE CONCAT('%',#{id},'%')
        </if>
        <if test="deptCode != null and deptCode!= ''">
            AND b.code LIKE CONCAT('%',#{deptCode},'%')
        </if>
        <if test="deptName != null and deptName!= ''">
            AND b.name LIKE CONCAT('%',#{deptName},'%')
        </if>
        <if test="name != null and name!= ''">
            AND c.name LIKE CONCAT('%',#{name},'%')
        </if>
        <if test="age != null and age>0 ">
        </if>
        <if test="mobile != null and mobile!= ''">
            AND c.mobile LIKE CONCAT('%',#{mobile},'%')
        </if>
    </select>

</mapper>