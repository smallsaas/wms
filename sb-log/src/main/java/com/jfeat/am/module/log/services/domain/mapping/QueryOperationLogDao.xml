<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jfeat.am.module.log.services.domain.dao.QueryOperationLogDao">

    <sql id="Base_Column_List">
        t_operation_log.*
    </sql>

    <select id="findOperationLogs" resultType="OperationLog">
        SELECT t_operation_log.*
        FROM t_operation_log
        WHERE 1=1
        <if test="logType != null and logType != ''">
            AND t_operation_log.log_type LIKE CONCAT('%',#{logType},'%')
        </if>

        <if test="logName != null and logName != ''">
            AND t_operation_log.log_name LIKE CONCAT('%',#{logName},'%')
        </if>

        <if test="userId != null and userId != ''">
            AND t_operation_log.user_id = #{userId}
        </if>
        <if test="userName != null and userName != ''">
            AND t_operation_log.user_name LIKE CONCAT('%',#{userName},'%')
        </if>

        <if test="className != null and className != ''">
            AND t_operation_log.class_name LIKE CONCAT('%',#{className},'%')
        </if>

        <if test="method != null and method != ''">
            AND t_operation_log.method LIKE CONCAT('%',#{method},'%')
        </if>

        <if test="createTime != null and createTime != ''">
            AND (t_operation_log.create_time LIKE CONCAT('%',#{createTime},'%')
        </if>

        ORDER BY t_operation_log.create_time DESC,t_operation_log.id DESC
    </select>

</mapper>