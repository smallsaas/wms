<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jfeat.am.module.notice.services.domain.dao.QueryNoticeDao">
    <sql id="Base_Column_List">
        t_notice.*
    </sql>
    <select id="findNotices" resultType="Notice" parameterType="Notice">
        SELECT t_notice.*
        FROM t_notice
        WHERE 1=1
        <if test="notice.type != null and notice.type!= ''">
            AND t_notice.type LIKE CONCAT('%',#{notice.type},'%')
        </if>
        <if test="notice.enabled != null">
            AND t_notice.enabled = #{notice.enabled}
        </if>
        <if test="notice.title != null and notice.title!= ''">
            AND t_notice.title LIKE CONCAT('%',#{notice.title},'%')
        </if>
        <if test="notice.content != null and notice.content!= ''">
            AND t_notice.content LIKE CONCAT('%',#{notice.content},'%')
        </if>
        <if test="notice.createTime != null">
            AND t_notice.create_time LIKE CONCAT('%',#{notice.createTime},'%')
        </if>
        <if test="notice.updateTime != null">
            AND t_notice.update_time LIKE CONCAT('%',#{notice.updateTime},'%')
        </if>
        <if test="notice.endTime != null">
            AND t_notice.end_time LIKE CONCAT('%',#{notice.endTime},'%')
        </if>
        <if test="expired != null">
            <if test="expired == 1">
                AND CURRENT_TIMESTAMP > t_notice.end_time
            </if>
            <if test="expired == 0">
                AND t_notice.end_time >= CURRENT_TIMESTAMP
            </if>
        </if>

        ORDER BY t_notice.id DESC
    </select>
</mapper>